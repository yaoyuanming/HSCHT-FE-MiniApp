<template>
	<view class="container">
		<!-- é¡¶éƒ¨Banner (è½®æ’­å›¾) -->
		<view class="banner-wrapper">
			<swiper class="swiper" :indicator-dots="true" :autoplay="true" :interval="3000" :duration="1000"
				indicator-color="rgba(255, 255, 255, 0.5)" indicator-active-color="#ffffff">
				<swiper-item v-for="(item, index) in swiperList" :key="index">
					<view class="swiper-item">
						<image :src="item.image" mode="aspectFill" class="swiper-image"></image>
						<!-- è“è‰²æ¸å˜é®ç½© -->
						<view class="swiper-overlay"></view>
					</view>
				</swiper-item>
			</swiper>

			<!-- æ‚¬æµ®å†…å®¹ -->
			<view class="banner-content">
				<view class="title">æµ·ä¸å‡ºæµ·é€š</view>
				<view class="subtitle">ä¸€ç«™å¼å…¨çƒæ”¿ç­–æŸ¥è¯¢ä¸æœåŠ¡</view>
				<button class="explore-btn" size="mini">ç«‹å³æ¢ç´¢</button>
			</view>
		</view>

		<!-- æ”¿åŠ¡å¡ç‰‡ -->
		<view class="service-section">
			<view class="service-card">
				<text class="service-title">æ”¿åŠ¡</text>
				<text class="service-desc">å‡ºæµ·ä¸šåŠ¡å¿«é€ŸåŠç†</text>
			</view>
		</view>

		<!-- å›½å®¶åˆ—è¡¨ç½‘æ ¼ -->
		<view class="country-grid">
			<view class="grid-item" v-for="(item, index) in countries" :key="index" @click="onCountryClick(item)">
				<image class="country-img" :src="item.image" mode="aspectFill"></image>
				<!-- è’™å±‚ä¸æ–‡å­— -->
				<view class="country-overlay">
					<text class="country-name">{{ item.name }}</text>
				</view>
			</view>

			<!-- æ›´å¤šå›½å®¶æŒ‰é’® -->
			<view class="grid-item more-item" @click="onMoreClick">
				<view class="more-content">
					<!-- ä½¿ç”¨uni-iconsï¼Œå¦‚æœæ²¡æœ‰å¼•å…¥éœ€è¦ç¡®è®¤ï¼Œè¿™é‡Œæš‚æ—¶ç”¨æ–‡å­—æˆ–ç®€å•å›¾æ ‡ä»£æ›¿ -->
					<text class="more-icon">ğŸŒ</text>
					<text class="more-text">æ›´å¤šå›½å®¶</text>
				</view>
			</view>
		</view>
	</view>

	<!-- åº•éƒ¨æœåŠ¡å¼¹çª— -->
	<uni-popup ref="servicePopup" type="bottom" :safe-area="false">
		<HomeService @close="closeServicePopup"></HomeService>
	</uni-popup>
</template>

<script>
	import HomeService from './Component/Home_Service.vue'

	export default {
		components: {
			HomeService
		},
		data() {
			return {
				// è½®æ’­å›¾æ•°æ®
				swiperList: [{
						image: '/static/Country/china.jpg'
					},
					{
						image: '/static/Country/china.jpg'
					},
					{
						image: '/static/Country/china.jpg'
					}
				],
				countries: [{
						name: 'ç¾å›½',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'æ—¥æœ¬',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'è‹±å›½',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'æ³•å›½',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'å¾·å›½',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'æ„å¤§åˆ©',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'åŠ æ‹¿å¤§',
						image: '/static/Country/china.jpg'
					},
					{
						name: 'æ¾³å¤§åˆ©äºš',
						image: '/static/Country/china.jpg'
					}
				]
			}
		},
		methods: {
			onCountryClick(item) {
				console.log('Clicked country:', item.name);
				// æ‰“å¼€åº•éƒ¨æœåŠ¡å¼¹çª—
				this.$refs.servicePopup.open();
			},
			closeServicePopup() {
				this.$refs.servicePopup.close();
			},
			onMoreClick() {
				console.log('Clicked more');
				// TODO: è·³è½¬æ›´å¤š
			}
		}
	}
</script>

<style lang="scss">
	.container {
		min-height: 100vh;
		background-color: #ffffff;
		padding-bottom: 20px;
	}

	/* Banner Wrapper */
	.banner-wrapper {
		position: relative;
		width: 100%;
		height: 420rpx;
	}

	.swiper {
		width: 100%;
		height: 100%;
	}

	.swiper-item {
		width: 100%;
		height: 100%;
		position: relative;
	}

	.swiper-image {
		width: 100%;
		height: 100%;
		display: block;
	}

	/* è“è‰²æ¸å˜é®ç½©ï¼Œæ¨¡æ‹Ÿè®¾è®¡å›¾çš„è“è‰²èƒŒæ™¯æ•ˆæœ */
	.swiper-overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		/* ä»å·¦åˆ°å³ï¼šå·¦ä¾§æ·±è“ä¿æŒæ–‡å­—æ¸…æ™°ï¼Œå³ä¾§é€æ¸é€æ˜éœ²å‡ºå›¾ç‰‡ */
		background: linear-gradient(90deg, rgba(30, 144, 255, 0.95) 0%, rgba(30, 144, 255, 0.6) 50%, rgba(30, 144, 255, 0.1) 100%);
	}

	/* æ‚¬æµ®å†…å®¹æ ·å¼ */
	.banner-content {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 10;
		display: flex;
		flex-direction: column;
		justify-content: center;
		padding-left: 50rpx;
		pointer-events: none; /* è®©ç‚¹å‡»äº‹ä»¶ç©¿é€åˆ°swiperï¼Œé™¤éç‚¹åˆ°æŒ‰é’® */
	}

	.title {
		font-size: 48rpx;
		font-weight: bold;
		color: #ffffff;
		margin-bottom: 20rpx;
		text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);
	}

	.subtitle {
		font-size: 28rpx;
		color: rgba(255, 255, 255, 0.9);
		margin-bottom: 40rpx;
	}

	.explore-btn {
		background-color: #ffffff;
		color: #007aff;
		font-weight: bold;
		border-radius: 8rpx;
		padding: 0 30rpx;
		margin: 0;
		border: none;
		line-height: 2.4;
		font-size: 28rpx;
		align-self: flex-start; /* æŒ‰é’®å·¦å¯¹é½ */
		pointer-events: auto; /* æ¢å¤æŒ‰é’®ç‚¹å‡» */
		box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.1);
	}

	/* æ”¿åŠ¡å¡ç‰‡ */
	.service-section {
		padding: 0 30rpx;
		margin-top: 30rpx; /* ä¸bannerçš„é—´è· */
		margin-bottom: 40rpx;
	}

	.service-card {
		background-color: #1e90ff; /* äº®è“è‰² */
		border-radius: 20rpx;
		height: 180rpx;
		text-align: center;
		color: #ffffff;
		box-shadow: 0 8rpx 16rpx rgba(30, 144, 255, 0.25);
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

	.service-title {
		font-size: 40rpx;
		font-weight: bold;
		margin-bottom: 12rpx;
	}

	.service-desc {
		font-size: 26rpx;
		opacity: 0.9;
	}

	/* å›½å®¶ç½‘æ ¼ */
	.country-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 20rpx;
		padding: 0 30rpx;
	}

	.grid-item {
		position: relative;
		aspect-ratio: 1; /* æ­£æ–¹å½¢ */
		border-radius: 8rpx;
		overflow: hidden;
		background-color: #f8f8f8;
	}

	.country-img {
		width: 100%;
		height: 100%;
		display: block;
	}

	.country-overlay {
		position: absolute;
		bottom: 0;
		left: 0;
		width: 100%;
		background: rgba(0, 0, 0, 0.3); /* é™ä½è’™å±‚é€æ˜åº¦ */
		padding: 8rpx 0;
		display: flex;
		justify-content: center;
		align-items: center;
	}

	.country-name {
		color: #ffffff;
		font-size: 24rpx;
		font-weight: 500;
	}

	/* æ›´å¤šæŒ‰é’®æ ·å¼ */
	.more-item {
		border: 2rpx solid #a3a4a4ff; /* è¾¹æ¡†é¢œè‰²åŠ æ·± */
		border-radius: 20rpx; /* å¢åŠ åœ†è§’ */
		background-color: #f5f7fa; /* æµ…è‰²èƒŒæ™¯ */
		display: flex;
		align-items: center;
		justify-content: center;
		box-sizing: border-box; /* ç¡®ä¿borderä¸æ’‘å¤§å®½é«˜ */
	}

	.more-content {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		color: #666666;
	}

	.more-icon {
		font-size: 40rpx;
		margin-bottom: 10rpx;
		color: #007aff;
	}

	.more-text {
		font-size: 24rpx;
	}
</style>
